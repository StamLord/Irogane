[gd_scene load_steps=67 format=3 uid="uid://dq6tiqj0gtm6u"]

[ext_resource type="PackedScene" uid="uid://c54hb80sgqu3t" path="res://assets/models/first_person_rig.fbx" id="1_a1su1"]
[ext_resource type="Script" path="res://scripts/procedural/hands_ik.gd" id="2_50ecj"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_40lk6"]
animation = &"first_person_rig|unarmed_defend"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_c2gog"]
animation = &"first_person_rig|unarmed_defend_start"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0rsp5"]
animation = &"first_person_rig|unarmed_flurry"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4lbs4"]
animation = &"first_person_rig|unarmed_air"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6jbm7"]
animation = &"first_person_rig|unarmed_rope_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_01gm7"]
animation = &"first_person_rig|unarmed_rope_up"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hu88i"]
animation = &"first_person_rig|unarmed_rope_down"

[sub_resource type="AnimationNodeBlend3" id="AnimationNodeBlend3_fath8"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_kh2ps"]
graph_offset = Vector2(-479.436, -21.2262)
nodes/Animation/node = SubResource("AnimationNodeAnimation_hu88i")
nodes/Animation/position = Vector2(-300, 240)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_6jbm7")
"nodes/Animation 2/position" = Vector2(-300, 120)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_01gm7")
"nodes/Animation 3/position" = Vector2(-300, 0)
nodes/blend/node = SubResource("AnimationNodeBlend3_fath8")
nodes/blend/position = Vector2(60, 60)
nodes/output/position = Vector2(220, 120)
node_connections = [&"output", 0, &"blend", &"blend", 0, &"Animation 3", &"blend", 1, &"Animation 2", &"blend", 2, &"Animation"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5vpgu"]
animation = &"first_person_rig|unarmed_glide"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6i3wk"]
animation = &"first_person_rig|unarmed_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lxldy"]
animation = &"first_person_rig|unarmed_swim_forward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_cysta"]
animation = &"first_person_rig|unarmed_swim_back"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bhhwb"]
animation = &"first_person_rig|unarmed_swim_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bgxes"]
animation = &"first_person_rig|unarmed_swim_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_d4aqu"]
animation = &"first_person_rig|unarmed_swim_idle"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_yniy4"]
blend_point_0/node = SubResource("AnimationNodeAnimation_lxldy")
blend_point_0/pos = Vector2(0, 0.8)
blend_point_1/node = SubResource("AnimationNodeAnimation_cysta")
blend_point_1/pos = Vector2(0, -0.8)
blend_point_2/node = SubResource("AnimationNodeAnimation_bhhwb")
blend_point_2/pos = Vector2(-1, 0)
blend_point_3/node = SubResource("AnimationNodeAnimation_bgxes")
blend_point_3/pos = Vector2(1, 0)
blend_point_4/node = SubResource("AnimationNodeAnimation_d4aqu")
blend_point_4/pos = Vector2(0, 0)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_ajddp"]
graph_offset = Vector2(-499.671, -30.2878)
nodes/blend/node = SubResource("AnimationNodeBlendSpace2D_yniy4")
nodes/blend/position = Vector2(80, 120)
node_connections = [&"output", 0, &"blend"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qr7u4"]
xfade_time = 0.2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_e4gxj"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_i1tv8"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ixbq4"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_r0gj4"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_4ykky"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_q7cle"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_iay16"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dvsb4"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_f2gc7"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ae4ma"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_h72lk"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_g4vf0"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_t712a"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_66fwv"]
priority = 10
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_x8con"]
advance_mode = 2
advance_condition = &"is_swim"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dr8fg"]
advance_mode = 2
advance_condition = &"is_climb_rope"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lm6tc"]
advance_mode = 2
advance_condition = &"is_air"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_167rk"]
advance_mode = 2
advance_condition = &"is_glide"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_li0bv"]
states/Start/position = Vector2(900, -31)
states/air/node = SubResource("AnimationNodeAnimation_4lbs4")
states/air/position = Vector2(597, 100)
states/climb_rope/node = SubResource("AnimationNodeBlendTree_kh2ps")
states/climb_rope/position = Vector2(597, -31)
states/glide/node = SubResource("AnimationNodeAnimation_5vpgu")
states/glide/position = Vector2(794, 100)
states/idle/node = SubResource("AnimationNodeAnimation_6i3wk")
states/idle/position = Vector2(368, 100)
states/swim/node = SubResource("AnimationNodeBlendTree_ajddp")
states/swim/position = Vector2(481, 189)
transitions = ["idle", "air", SubResource("AnimationNodeStateMachineTransition_qr7u4"), "air", "idle", SubResource("AnimationNodeStateMachineTransition_e4gxj"), "idle", "swim", SubResource("AnimationNodeStateMachineTransition_i1tv8"), "swim", "air", SubResource("AnimationNodeStateMachineTransition_ixbq4"), "air", "swim", SubResource("AnimationNodeStateMachineTransition_r0gj4"), "swim", "idle", SubResource("AnimationNodeStateMachineTransition_4ykky"), "climb_rope", "air", SubResource("AnimationNodeStateMachineTransition_q7cle"), "air", "climb_rope", SubResource("AnimationNodeStateMachineTransition_iay16"), "glide", "climb_rope", SubResource("AnimationNodeStateMachineTransition_dvsb4"), "climb_rope", "glide", SubResource("AnimationNodeStateMachineTransition_f2gc7"), "glide", "air", SubResource("AnimationNodeStateMachineTransition_ae4ma"), "air", "glide", SubResource("AnimationNodeStateMachineTransition_h72lk"), "idle", "climb_rope", SubResource("AnimationNodeStateMachineTransition_g4vf0"), "climb_rope", "idle", SubResource("AnimationNodeStateMachineTransition_t712a"), "Start", "idle", SubResource("AnimationNodeStateMachineTransition_66fwv"), "Start", "swim", SubResource("AnimationNodeStateMachineTransition_x8con"), "Start", "climb_rope", SubResource("AnimationNodeStateMachineTransition_dr8fg"), "Start", "air", SubResource("AnimationNodeStateMachineTransition_lm6tc"), "Start", "glide", SubResource("AnimationNodeStateMachineTransition_167rk")]
graph_offset = Vector2(9, -37)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_r4omb"]
animation = &"first_person_rig|unarmed_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6gke7"]
animation = &"first_person_rig|unarmed_left_chain"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lfxp2"]
animation = &"first_person_rig|unarmed_left_elbow"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_3vtyd"]
animation = &"first_person_rig|unarmed_open_hands"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hseee"]
animation = &"first_person_rig|unarmed_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7qpl0"]
animation = &"first_person_rig|unarmed_right_chain"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_45dto"]
animation = &"first_person_rig|unarmed_right_elbow"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jpv14"]
animation = &"first_person_rig|unarmed_right_elbow_2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_yt4rg"]
animation = &"first_person_rig|unarmed_right_elbow_2_chain"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ka5f0"]
animation = &"first_person_rig|unarmed_right_elbow_chain"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_yxxov"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_510dm"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_utu30"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_rsj0s"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kdn1c"]
advance_mode = 2
advance_condition = &"r"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_fcikq"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_twk6d"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_83w24"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5jbr7"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_a2k33"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8yrlu"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_j14ue"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_trxam"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3fevs"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_hcwtg"]
states/End/position = Vector2(437, 268)
states/Start/position = Vector2(437, 203)
states/defend/node = SubResource("AnimationNodeAnimation_40lk6")
states/defend/position = Vector2(213, 11)
states/defend_start/node = SubResource("AnimationNodeAnimation_c2gog")
states/defend_start/position = Vector2(74, 11)
states/flurry/node = SubResource("AnimationNodeAnimation_0rsp5")
states/flurry/position = Vector2(691, 38)
states/idle/node = SubResource("AnimationNodeStateMachine_li0bv")
states/idle/position = Vector2(437, 77)
states/left/node = SubResource("AnimationNodeAnimation_r4omb")
states/left/position = Vector2(88, 136)
states/left_chain/node = SubResource("AnimationNodeAnimation_6gke7")
states/left_chain/position = Vector2(213, 136)
states/left_elbow/node = SubResource("AnimationNodeAnimation_lfxp2")
states/left_elbow/position = Vector2(691, -21)
states/open_hands/node = SubResource("AnimationNodeAnimation_3vtyd")
states/open_hands/position = Vector2(437, -21)
states/right/node = SubResource("AnimationNodeAnimation_hseee")
states/right/position = Vector2(88, 77)
states/right_chain/node = SubResource("AnimationNodeAnimation_7qpl0")
states/right_chain/position = Vector2(213, 77)
states/right_elbow/node = SubResource("AnimationNodeAnimation_45dto")
states/right_elbow/position = Vector2(886, 105)
states/right_elbow_2/node = SubResource("AnimationNodeAnimation_jpv14")
states/right_elbow_2/position = Vector2(865, 171)
states/right_elbow_2_chain/node = SubResource("AnimationNodeAnimation_yt4rg")
states/right_elbow_2_chain/position = Vector2(675, 171)
states/right_elbow_chain/node = SubResource("AnimationNodeAnimation_ka5f0")
states/right_elbow_chain/position = Vector2(714, 105)
transitions = ["left", "left_chain", SubResource("AnimationNodeStateMachineTransition_yxxov"), "right", "right_chain", SubResource("AnimationNodeStateMachineTransition_510dm"), "defend_start", "defend", SubResource("AnimationNodeStateMachineTransition_utu30"), "right_elbow", "right_elbow_chain", SubResource("AnimationNodeStateMachineTransition_rsj0s"), "right_elbow_chain", "right_elbow_2", SubResource("AnimationNodeStateMachineTransition_kdn1c"), "right_elbow_2", "right_elbow_2_chain", SubResource("AnimationNodeStateMachineTransition_fcikq"), "Start", "idle", SubResource("AnimationNodeStateMachineTransition_twk6d"), "defend", "idle", SubResource("AnimationNodeStateMachineTransition_83w24"), "right_chain", "idle", SubResource("AnimationNodeStateMachineTransition_5jbr7"), "left_chain", "idle", SubResource("AnimationNodeStateMachineTransition_a2k33"), "right_elbow_chain", "idle", SubResource("AnimationNodeStateMachineTransition_8yrlu"), "right_elbow_2_chain", "idle", SubResource("AnimationNodeStateMachineTransition_j14ue"), "flurry", "idle", SubResource("AnimationNodeStateMachineTransition_trxam"), "left_elbow", "idle", SubResource("AnimationNodeStateMachineTransition_3fevs")]
graph_offset = Vector2(-214, -45)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_j6qrk"]
graph_offset = Vector2(-569.296, 71.3641)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_hcwtg")
nodes/StateMachine/position = Vector2(100, 140)
nodes/output/position = Vector2(360, 140)
node_connections = [&"output", 0, &"StateMachine"]

[node name="first_person_rig" instance=ExtResource("1_a1su1")]
script = ExtResource("2_50ecj")

[node name="first_person_rig" parent="RootNode" index="0"]
transform = Transform3D(100, 0, 0, 0, -4.37114e-06, 100, 0, -100, -4.37114e-06, 0, 0, 0)

[node name="Skeleton3D" parent="RootNode/first_person_rig" index="0"]
bones/1/rotation = Quaternion(0.0966945, 0.0524266, 0.708035, 0.697559)
bones/2/rotation = Quaternion(0.386094, -0.00939188, -0.0186262, 0.922224)
bones/3/rotation = Quaternion(-0.00284924, 0.130495, 0.0216421, 0.991209)
bones/4/rotation = Quaternion(0.625924, -0.0991251, 0.107327, 0.766077)
bones/5/rotation = Quaternion(-0.0146769, 0.00409543, -0.0348618, 0.999276)
bones/11/rotation = Quaternion(0.00899623, 0.708189, 0.0112157, 0.705877)
bones/12/rotation = Quaternion(0.062167, -0.001251, 0.00691014, 0.998041)
bones/15/rotation = Quaternion(0.0529709, 0.696364, 0.0389232, 0.714672)
bones/19/rotation = Quaternion(0.101105, 0.780915, 0.0808732, 0.611072)
bones/20/rotation = Quaternion(0.0637975, -0.0039671, -0.0028241, 0.997951)
bones/23/rotation = Quaternion(0.120418, -0.0759671, -0.704706, 0.695067)
bones/24/rotation = Quaternion(0.422527, 0.0101823, 0.0182823, 0.906109)
bones/25/rotation = Quaternion(-0.00379054, -0.173607, -0.0214973, 0.984573)
bones/26/rotation = Quaternion(0.625924, 0.099125, -0.107327, 0.766077)
bones/27/rotation = Quaternion(-0.0146767, -0.0040955, 0.0348619, 0.999276)
bones/29/rotation = Quaternion(0.0237932, -0.701384, -0.0316946, 0.711681)
bones/33/rotation = Quaternion(0.0225935, -0.706668, -0.0247833, 0.70675)
bones/37/rotation = Quaternion(0.0545429, -0.703851, -0.0375426, 0.707255)
bones/39/rotation = Quaternion(0.103273, -0.025937, -0.0216205, 0.99408)

[node name="left_hand_ik" type="SkeletonIK3D" parent="RootNode/first_person_rig/Skeleton3D" index="5"]
root_bone = &"shoulder_l"
tip_bone = &"hand_l"
override_tip_basis = false
use_magnet = true
magnet = Vector3(-1, 0, 0)
target_node = NodePath("../../../../target_l")

[node name="right_hand_ik" type="SkeletonIK3D" parent="RootNode/first_person_rig/Skeleton3D" index="6"]
root_bone = &"shoulder_r"
tip_bone = &"hand_r"
use_magnet = true
magnet = Vector3(1, 0, 0)
target_node = NodePath("../../../../target_r")

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeBlendTree_j6qrk")
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/StateMachine/conditions/r = false
parameters/StateMachine/idle/conditions/is_air = false
parameters/StateMachine/idle/conditions/is_climb_rope = false
parameters/StateMachine/idle/conditions/is_glide = false
parameters/StateMachine/idle/conditions/is_swim = false
parameters/StateMachine/idle/climb_rope/blend/blend_amount = 0.0
parameters/StateMachine/idle/swim/blend/blend_position = Vector2(0, 0)

[node name="target_l" type="Marker3D" parent="." index="3"]
transform = Transform3D(0.86433, 0.490383, 0.111619, -0.0301537, -0.17101, 0.984808, 0.502021, -0.854564, -0.133022, -0.175, 1.5, -0.5)

[node name="target_r" type="Marker3D" parent="." index="4"]
transform = Transform3D(-0.211309, -0.365998, -0.906308, 0.866025, -0.5, 0, -0.453154, -0.784885, 0.422618, 0.175, 1.5, -0.5)
